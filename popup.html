<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Python Extension Calculator</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <py-config>
      [[runtimes]]
      src = "runtime/pyodide.js"
      name = "pyodide-0.21.3"
      lang = "python"
    </py-config>
    <link rel="icon" type="icons/png" href="/icon-128.png" />
    <link rel="stylesheet" href="popup.css" />
    <link rel="stylesheet" href="runtime/pyscript.css" />
    <script defer src="runtime/pyscript.js"></script>
  </head>
  <body>
    <h4>Calculator</h4>
    <input type="number" id="input1" placeholder="input1" />
    <input type="number" id="input2" placeholder="input2" />
    <button id="plus-btn">Plus</button>
    <button id="minus-btn">Minus</button>
    <h5 id="result"></h5>
<py-script>
from js import document as popup  # DOM for this popup page
from pyodide.ffi import create_proxy

def add(event):
    input1 = popup.getElementById('input1').value
    input2 = popup.getElementById('input2').value

    if input1 == "":
        input1 = 0
    if input2 == "":
        input2 = 0

    result = int(input1) + int(input2)
    popup.getElementById('result').innerHTML = f"Result: {result}"

def subtract(event):
    input1 = popup.getElementById('input1').value
    input2 = popup.getElementById('input2').value

    if input1 == "":
        input1 = 0
    if input2 == "":
        input2 = 0

    result = int(input1) - int(input2)
    popup.getElementById('result').innerHTML = f"Result: {result}"

add_js = create_proxy(add)
subtract_js = create_proxy(subtract)

# Bind functions
popup.getElementById('plus-btn').addEventListener('click', add_js)
popup.getElementById('minus-btn').addEventListener('click', subtract_js)
</py-script>
<py-repl>
print("Malik Akbar")
</py-repl>
  </body>
</html>

